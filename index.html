<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer Utility Tools</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css">
    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 20px;
            padding-bottom: 40px;
        }
        
        .tool-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 .125rem .25rem rgba(0,0,0,.075);
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .output {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 15px;
            font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            white-space: pre-wrap;
            word-break: break-all;
            border-left: 4px solid #0d6efd;
        }
        
        .nav-link {
            color: #495057;
            font-weight: 500;
        }
        
        .nav-link.active {
            color: #0d6efd !important;
            border-bottom-color: #0d6efd !important;
        }
        
        .main-title {
            margin-bottom: 30px;
            color: #212529;
        }
        
        .tool-icon {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center main-title">Developer Utility Tools</h1>
        
        <ul class="nav nav-tabs mb-4" id="toolsTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="timestamp-tab" data-bs-toggle="tab" data-bs-target="#timestamp" 
                        type="button" role="tab" aria-controls="timestamp" aria-selected="true">
                    <i class="bi bi-clock tool-icon"></i>Timestamp Converter
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="time-since-tab" data-bs-toggle="tab" data-bs-target="#time-since" 
                        type="button" role="tab" aria-controls="time-since" aria-selected="false">
                    <i class="bi bi-calendar-check tool-icon"></i>Time Since Calculator
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="jwt-tab" data-bs-toggle="tab" data-bs-target="#jwt" 
                        type="button" role="tab" aria-controls="jwt" aria-selected="false">
                    <i class="bi bi-key tool-icon"></i>JWT Decoder
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="base64-tab" data-bs-toggle="tab" data-bs-target="#base64" 
                        type="button" role="tab" aria-controls="base64" aria-selected="false">
                    <i class="bi bi-code-square tool-icon"></i>Base64 Encoder/Decoder
                </button>
            </li>
        </ul>
        
        <div class="tab-content" id="toolsTabContent">
            <!-- Timestamp Converter -->
            <div class="tab-pane fade show active" id="timestamp" role="tabpanel" aria-labelledby="timestamp-tab">
                <div class="tool-container">
                    <h2 class="mb-4"><i class="bi bi-clock-history text-primary me-2"></i>Timestamp Converter</h2>
                    <div class="mb-3">
                        <label for="timestamp-input" class="form-label">Unix Timestamp (in seconds):</label>
                        <div class="input-group mb-3">
                            <input type="number" class="form-control" id="timestamp-input" placeholder="Enter timestamp (e.g., 1617235200)">
                            <button class="btn btn-primary" id="convert-timestamp">Convert</button>
                            <button class="btn btn-outline-secondary" id="current-timestamp">Use Current Time</button>
                        </div>
                    </div>
                    <div class="output d-none" id="timestamp-output"></div>
                </div>
            </div>
            
            <!-- Time Since Calculator -->
            <div class="tab-pane fade" id="time-since" role="tabpanel" aria-labelledby="time-since-tab">
                <div class="tool-container">
                    <h2 class="mb-4"><i class="bi bi-hourglass-split text-primary me-2"></i>Time Since Calculator</h2>
                    <div class="mb-3">
                        <label for="time-since-input" class="form-label">Select a Date and Time:</label>
                        <div class="input-group mb-3">
                            <input type="datetime-local" class="form-control" id="time-since-input">
                            <button class="btn btn-primary" id="calculate-time-since">Calculate</button>
                        </div>
                    </div>
                    <div class="output d-none" id="time-since-output"></div>
                </div>
            </div>
            
            <!-- JWT Decoder -->
            <div class="tab-pane fade" id="jwt" role="tabpanel" aria-labelledby="jwt-tab">
                <div class="tool-container">
                    <h2 class="mb-4"><i class="bi bi-shield-lock text-primary me-2"></i>JWT Decoder</h2>
                    <div class="mb-3">
                        <label for="jwt-input" class="form-label">JWT Token:</label>
                        <textarea class="form-control font-monospace" id="jwt-input" rows="4" placeholder="Enter JWT token..."></textarea>
                        <button class="btn btn-primary mt-3" id="decode-jwt">Decode</button>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-6 mb-3">
                            <h5 class="text-secondary mb-2">Header</h5>
                            <div class="output d-none" id="jwt-header-output"></div>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-secondary mb-2">Payload</h5>
                            <div class="output d-none" id="jwt-payload-output"></div>
                        </div>
                    </div>
                    <div class="alert alert-danger mt-3 d-none" id="jwt-error"></div>
                </div>
            </div>
            
            <!-- Base64 Encoder/Decoder -->
            <div class="tab-pane fade" id="base64" role="tabpanel" aria-labelledby="base64-tab">
                <div class="tool-container">
                    <h2 class="mb-4"><i class="bi bi-braces text-primary me-2"></i>Base64 Encoder/Decoder</h2>
                    <div class="mb-3">
                        <label for="base64-input" class="form-label">Input:</label>
                        <textarea class="form-control font-monospace" id="base64-input" rows="5" placeholder="Enter text to encode or base64 to decode..."></textarea>
                        <div class="mt-3">
                            <button class="btn btn-primary me-2" id="encode-base64">Encode to Base64</button>
                            <button class="btn btn-secondary" id="decode-base64">Decode from Base64</button>
                        </div>
                    </div>
                    <h5 class="text-secondary mb-2 mt-4">Output:</h5>
                    <div class="output d-none" id="base64-output"></div>
                    <div class="alert alert-danger mt-3 d-none" id="base64-error"></div>
                </div>
            </div>
        </div>
        
        <footer class="text-center mt-5 text-muted">
            <p>Developer Utility Tools | <a href="https://github.com/" target="_blank" class="text-decoration-none">GitHub Repository</a></p>
        </footer>
    </div>

    <!-- Bootstrap 5 JS Bundle with Popper -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Timestamp Converter
        document.getElementById('convert-timestamp').addEventListener('click', () => {
            const timestamp = document.getElementById('timestamp-input').value;
            const output = document.getElementById('timestamp-output');
            
            if (!timestamp) {
                output.textContent = 'Please enter a timestamp.';
                output.classList.remove('d-none');
                return;
            }
            
            try {
                const date = new Date(parseInt(timestamp) * 1000);
                if (isNaN(date.getTime())) {
                    throw new Error('Invalid timestamp');
                }
                
                output.innerHTML = `
<strong>UTC Time:</strong> ${date.toUTCString()}
<strong>Local Time:</strong> ${date.toString()}
<strong>ISO Format:</strong> ${date.toISOString()}
                `;
                output.classList.remove('d-none');
            } catch (error) {
                output.textContent = `Error: ${error.message}`;
                output.classList.remove('d-none');
            }
        });
        
        document.getElementById('current-timestamp').addEventListener('click', () => {
            const now = Math.floor(Date.now() / 1000);
            document.getElementById('timestamp-input').value = now;
            document.getElementById('convert-timestamp').click();
        });
        
        // Time Since Calculator
        document.getElementById('calculate-time-since').addEventListener('click', () => {
            const inputDate = document.getElementById('time-since-input').value;
            const output = document.getElementById('time-since-output');
            
            if (!inputDate) {
                output.textContent = 'Please select a date and time.';
                output.classList.remove('d-none');
                return;
            }
            
            try {
                const selectedDate = new Date(inputDate);
                const now = new Date();
                
                const diffMs = now - selectedDate;
                
                if (diffMs < 0) {
                    output.textContent = 'The selected date is in the future.';
                    output.classList.remove('d-none');
                    return;
                }
                
                // Calculate differences
                const seconds = Math.floor(diffMs / 1000);
                const minutes = Math.floor(seconds / 60);
                const hours = Math.floor(minutes / 60);
                const days = Math.floor(hours / 24);
                
                // Calculate months and years more accurately
                let years = now.getFullYear() - selectedDate.getFullYear();
                let months = now.getMonth() - selectedDate.getMonth();
                
                // Adjust for day of month
                if (now.getDate() < selectedDate.getDate()) {
                    months--;
                }
                
                // Handle negative months
                if (months < 0) {
                    years--;
                    months += 12;
                }
                
                // Calculate remaining time
                const remainingDays = days - (years * 365 + months * 30); // Approximation
                const remainingHours = hours % 24;
                const remainingMinutes = minutes % 60;
                const remainingSeconds = seconds % 60;
                
                output.innerHTML = `
<div class="row">
    <div class="col-md-6">
        <h6 class="text-secondary">Elapsed Time</h6>
        <p>
            ${years} years, ${months} months, ${remainingDays} days<br>
            ${days} total days<br>
            ${hours} total hours<br>
            ${minutes} total minutes<br>
            ${seconds} total seconds
        </p>
    </div>
    <div class="col-md-6">
        <h6 class="text-secondary">Precise Time</h6>
        <p>${years} years, ${months} months, ${remainingDays} days, ${remainingHours} hours, ${remainingMinutes} minutes, ${remainingSeconds} seconds</p>
    </div>
</div>
                `;
                output.classList.remove('d-none');
            } catch (error) {
                output.textContent = `Error: ${error.message}`;
                output.classList.remove('d-none');
            }
        });
        
        // JWT Decoder
        document.getElementById('decode-jwt').addEventListener('click', () => {
            const jwtToken = document.getElementById('jwt-input').value.trim();
            const headerOutput = document.getElementById('jwt-header-output');
            const payloadOutput = document.getElementById('jwt-payload-output');
            const errorOutput = document.getElementById('jwt-error');
            
            // Reset outputs
            headerOutput.textContent = '';
            headerOutput.classList.add('d-none');
            payloadOutput.textContent = '';
            payloadOutput.classList.add('d-none');
            errorOutput.classList.add('d-none');
            
            if (!jwtToken) {
                errorOutput.textContent = 'Please enter a JWT token.';
                errorOutput.classList.remove('d-none');
                return;
            }
            
            try {
                const parts = jwtToken.split('.');
                if (parts.length !== 3) {
                    throw new Error('Invalid JWT format. Expected 3 parts separated by dots.');
                }
                
                const headerB64 = parts[0];
                const payloadB64 = parts[1];
                
                const decodeBase64 = (str) => {
                    // Replace characters for URL-safe base64
                    const base64 = str.replace(/-/g, '+').replace(/_/g, '/');
                    // Add padding if needed
                    const padding = '='.repeat((4 - (base64.length % 4)) % 4);
                    
                    // Decode and convert to string
                    return JSON.parse(atob(base64 + padding));
                };
                
                const header = decodeBase64(headerB64);
                const payload = decodeBase64(payloadB64);
                
                headerOutput.textContent = JSON.stringify(header, null, 2);
                headerOutput.classList.remove('d-none');
                payloadOutput.textContent = JSON.stringify(payload, null, 2);
                payloadOutput.classList.remove('d-none');
                
                // Check for expiration
                if (payload.exp) {
                    const expDate = new Date(payload.exp * 1000);
                    const now = new Date();
                    
                    if (expDate < now) {
                        errorOutput.textContent = `Note: This token expired on ${expDate.toLocaleString()}`;
                        errorOutput.classList.remove('d-none');
                    }
                }
            } catch (error) {
                errorOutput.textContent = `Error: ${error.message}`;
                errorOutput.classList.remove('d-none');
            }
        });
        
        // Base64 Encoder/Decoder
        document.getElementById('encode-base64').addEventListener('click', () => {
            const input = document.getElementById('base64-input').value;
            const output = document.getElementById('base64-output');
            const errorOutput = document.getElementById('base64-error');
            
            // Reset error
            errorOutput.classList.add('d-none');
            
            if (!input) {
                errorOutput.textContent = 'Please enter text to encode.';
                errorOutput.classList.remove('d-none');
                return;
            }
            
            try {
                const encoded = btoa(input);
                output.textContent = encoded;
                output.classList.remove('d-none');
            } catch (error) {
                errorOutput.textContent = `Error encoding to Base64: ${error.message}`;
                errorOutput.classList.remove('d-none');
            }
        });
        
        document.getElementById('decode-base64').addEventListener('click', () => {
            const input = document.getElementById('base64-input').value.trim();
            const output = document.getElementById('base64-output');
            const errorOutput = document.getElementById('base64-error');
            
            // Reset error
            errorOutput.classList.add('d-none');
            
            if (!input) {
                errorOutput.textContent = 'Please enter base64 to decode.';
                errorOutput.classList.remove('d-none');
                return;
            }
            
            try {
                const decoded = atob(input);
                output.textContent = decoded;
                output.classList.remove('d-none');
            } catch (error) {
                errorOutput.textContent = `Error decoding from Base64: ${error.message}. Make sure the input is valid Base64.`;
                errorOutput.classList.remove('d-none');
            }
        });

        // Set default date/time value for time-since calculator
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        
        document.getElementById('time-since-input').value = `${year}-${month}-${day}T${hours}:${minutes}`;
    </script>
</body>
</html>